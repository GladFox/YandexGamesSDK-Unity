(()=>{"use strict";var e={},n=function(){function e(){}return e.isLocalhost=function(){return["localhost","127.0.0.1","::1"].includes(window.location.hostname)},e}(),t=function(){function e(){}return e.authenticateUser=function(){return e=this,t=void 0,r=function(){var e,t,a;return function(e,n){var t,a,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=s(0),c.throw=s(1),c.return=s(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(s){return function(i){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(o=0)),o;)try{if(t=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],a=0}finally{t=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}(this,(function(r){switch(r.label){case 0:if(n.isLocalhost())return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.yandexSDK.getPlayer()];case 2:return e=r.sent(),a={id:e.getUniqueID(),name:e.getName(),avatarUrlSmall:e.getPhoto("small"),avatarUrlMedium:e.getPhoto("medium"),avatarUrlLarge:e.getPhoto("large")},unityInstance.SendMessage("YandexGamesSDK","OnAuthenticationSuccess",JSON.stringify(a)),[3,4];case 3:return t=r.sent(),unityInstance.SendMessage("YandexGamesSDK","OnAuthenticationFailure",t.message),[3,4];case 4:return[3,6];case 5:a={id:"10223",name:"Turan"},unityInstance.SendMessage("YandexGamesSDK","OnAuthenticationSuccess",JSON.stringify(a)),r.label=6;case 6:return[2]}}))},new((a=void 0)||(a=Promise))((function(n,o){function c(e){try{i(r.next(e))}catch(e){o(e)}}function s(e){try{i(r.throw(e))}catch(e){o(e)}}function i(e){var t;e.done?n(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(c,s)}i((r=r.apply(e,t||[])).next())}));var e,t,a,r},e}(),a=function(e,n,t,a){return new(t||(t=Promise))((function(r,o){function c(e){try{i(a.next(e))}catch(e){o(e)}}function s(e){try{i(a.throw(e))}catch(e){o(e)}}function i(e){var n;e.done?r(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,s)}i((a=a.apply(e,n||[])).next())}))},r=function(e,n){var t,a,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=s(0),c.throw=s(1),c.return=s(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(s){return function(i){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(o=0)),o;)try{if(t=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(e){s=[6,e],a=0}finally{t=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},o=function(){function e(){}return e.savePlayerData=function(e,n){return a(this,void 0,void 0,(function(){var t,a;return r(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,window.yandexSDK.getPlayer()];case 1:return[4,r.sent().setData((a={},a[e]=n,a),!0)];case 2:return r.sent(),unityInstance.SendMessage("YandexGamesSDK","OnPlayerDataSaved","true"),[3,4];case 3:return t=r.sent(),console.error("Failed to save player data:",t.message),unityInstance.SendMessage("YandexGamesSDK","OnPlayerDataSaved","false|".concat(t.message)),[3,4];case 4:return[2]}}))}))},e.loadPlayerData=function(e){return a(this,void 0,void 0,(function(){var n,t;return r(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,window.yandexSDK.getPlayer()];case 1:return[4,a.sent().getData([e])];case 2:return n=a.sent(),console.log(n),void 0!==n?unityInstance.SendMessage("YandexGamesSDK","OnPlayerDataLoaded",JSON.stringify({success:!0,data:n[e]})):unityInstance.SendMessage("YandexGamesSDK","OnPlayerDataLoaded","false|No data found for the given key"),[3,4];case 3:return t=a.sent(),console.error("Failed to load player data:",t.message),unityInstance.SendMessage("YandexGamesSDK","OnPlayerDataLoaded","false|".concat(t.message)),[3,4];case 4:return[2]}}))}))},e}();function c(){YaGames.init().then((function(e){window.yandexSDK=e,console.log("Yandex SDK loaded successfully"),l("OnYSDKLoaded","YSDK loaded successfully"),i()})).catch((function(e){console.error("Yandex SDK failed to load:",e.message),l("OnYSDKLoadFailed",e.message),i()}))}function s(){console.error("Failed to load Yandex SDK script"),i()}function i(){var e,n,t,a="Build",r="".concat(a,"/{{{ LOADER_FILENAME }}}"),o={dataUrl:"".concat(a,"/{{{ DATA_FILENAME }}}"),frameworkUrl:"".concat(a,"/{{{ FRAMEWORK_FILENAME }}}"),codeUrl:"".concat(a,"/{{{ CODE_FILENAME }}}"),streamingAssetsUrl:"StreamingAssets",companyName:"{{{ COMPANY_NAME }}}",productName:"{{{ PRODUCT_NAME }}}",productVersion:"{{{ PRODUCT_VERSION }}}"},c=document.querySelector("#unity-canvas");e=r,n=function(){createUnityInstance(c,o,u).then((function(e){console.log("Unity WebGL instance created successfully"),window.unityInstance=e})).catch((function(e){console.error("Failed to load Unity game:",e),alert("Failed to load Unity game: "+e)}))},(t=document.createElement("script")).src=e,t.onload=n,t.onerror=function(){console.error("Failed to load script:",e),alert("Failed to load Unity loader script.")},document.body.appendChild(t)}function u(e){}function l(e,n){window.unityInstance?window.unityInstance.SendMessage("YandexGamesSDK",e,n):console.warn("Unity instance is not initialized.")}window.YandexSDKExports={AuthenticateUser:t.authenticateUser,SavePlayerData:o.savePlayerData,LoadPlayerData:o.loadPlayerData},window.addEventListener("load",(function(){var e;n.isLocalhost()?i():((e=document.createElement("script")).src="https://yandex.ru/games/sdk/v2",e.onload=c,e.onerror=s,document.head.appendChild(e))}));var d=window;for(var f in e)d[f]=e[f];e.__esModule&&Object.defineProperty(d,"__esModule",{value:!0})})();